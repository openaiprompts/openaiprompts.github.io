"use strict";(globalThis["webpackChunkopenaimart"]=globalThis["webpackChunkopenaimart"]||[]).push([[175],{8341:(e,t,n)=>{n.d(t,{s:()=>p});var o=n(1809),a=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function p(e){try{i(o.next(e))}catch(t){l(t)}}function r(e){try{i(o["throw"](e))}catch(t){l(t)}}function i(e){e.done?n(e.value):a(e.value).then(p,r)}i((o=o.apply(e,t||[])).next())}))};const l={engine:"text-davinci-003",preprompt:"This is a preprompt.",prompt:"This is a prompt.",result:"",temperature:.3,max_tokens:128,top_p:1,frequency_penalty:0,presence_penalty:0,stop:null,best_of:1,title:"Untitled",author_name:"",author_id:"",tags:null},p=(0,o.Q_)("oai",{state:()=>({gpt:{},apiInfo:{api_type:"azure",azure_openai_name:localStorage.getItem("azure_openai_name")||"",api_version:"2022-12-01",api_key:localStorage.getItem("api_key")||""},promptId:""}),getters:{},actions:{resetGPT:function(){for(const e in l)this.gpt[e]=l[e]},fetchGPT:function(){return a(this,void 0,void 0,(function*(){if(console.log("starting fetchGPT"),null===this.apiInfo.api_key)return void alert("api key is null");const e=yield fetch(`https://${this.apiInfo.azure_openai_name}.openai.azure.com/openai/deployments/${this.gpt.engine}/completions?api-version=${this.apiInfo.api_version}`,{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiInfo.api_key},body:JSON.stringify({prompt:this.gpt.preprompt+this.gpt.prompt,max_tokens:"string"==typeof this.gpt.max_tokens?parseInt(this.gpt.max_tokens):this.gpt.max_tokens,temperature:this.gpt.temperature,top_p:this.gpt.top_p,frequency_penalty:this.gpt.frequency_penalty,presence_penalty:this.gpt.presence_penalty,stop:this.gpt.stop})}),t=yield e.json();if(t.error)return console.log(t.error),void alert(t.error.message);this.gpt.result=t.choices[0].text}))},setLocalStorage:function(){localStorage.setItem("api_key",this.apiInfo.api_key),localStorage.setItem("azure_openai_name",this.apiInfo.azure_openai_name),alert("Saved to localStorage")}}})},1175:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var o=n(9835);const a=(0,o._)("div",{class:"text-h4 q-pa-md"},"API & Chatbot Deployment",-1),l=(0,o._)("b",null,".env",-1),p=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"docker run -d -p 80:80 --env-file .env warching/openai-api",-1),r=(0,o._)("br",null,null,-1),i=(0,o._)("code",{style:{display:"block"}}," curl --location --request POST 'http://localhost/' --header 'Content-Type: application/json' --data-raw '{ \"prompt\": \"Hi\" }' ",-1),s=(0,o._)("a",{target:"_blank",href:"https://telegram.me/botfather"},"https://telegram.me/botfather",-1),c=(0,o._)("br",null,null,-1),u=(0,o._)("br",null,null,-1),m=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"TG_BOT_TOKEN=YOUR_BOT_TOKEN",-1),_=(0,o._)("br",null,null,-1),d=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"docker run -d --env-file .env warching/openai-tg-bot",-1),h=(0,o._)("br",null,null,-1),g=(0,o._)("a",{target:"_blank",href:"https://portal.azure.com/#create/Microsoft.AzureBot"},"https://portal.azure.com/#create/Microsoft.AzureBot",-1),f=(0,o._)("br",null,null,-1),b=(0,o._)("br",null,null,-1),y=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},[(0,o.Uk)(" MicrosoftAppType=MultiTenant "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppId=YOUR_MICROSOFT_APP_ID "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppPassword=YOUR_MICROSOFT_APP_PASSWORD "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppTenantId=YOUR_MICROSOFT_APP_TENANT_ID ")],-1),k=(0,o._)("br",null,null,-1),w=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap"}},"docker run -d -p 3978:3978 --env-file .env warching/openai-teams-bot",-1),T=(0,o._)("br",null,null,-1),v=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap"}},"npx localtunnel --port 3978",-1),I=(0,o._)("br",null,null,-1),P=(0,o._)("br",null,null,-1),O=(0,o._)("br",null,null,-1),U=(0,o._)("br",null,null,-1),A=(0,o._)("br",null,null,-1);function E(e,t,n,E,C,S){const R=(0,o.up)("q-btn"),W=(0,o.up)("q-stepper-navigation"),N=(0,o.up)("q-step"),q=(0,o.up)("q-img"),x=(0,o.up)("q-stepper"),M=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(M,{class:"q-pa-md"},{default:(0,o.w5)((()=>[a,(0,o.Wm)(x,{modelValue:e.step,"onUpdate:modelValue":t[6]||(t[6]=t=>e.step=t),"header-nav":"",vertical:"",color:"primary",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{name:1,title:"Download .env file",icon:"settings",done:e.step>1},{default:(0,o.w5)((()=>[(0,o.Wm)(R,{onClick:e.downloadEnv,outline:"",round:"",color:"primary",icon:"save"},null,8,["onClick"]),(0,o.Uk)(" Download the .env example, rename it to "),l,(0,o.Uk)(" and place it in the root of your project. "),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(R,{onClick:t[0]||(t[0]=t=>e.step=2),color:"primary",label:"Continue"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(N,{name:2,title:"Deploy as an API",caption:"Optional",icon:"publish",done:e.step>2},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Run the command below: "),p,r,(0,o.Uk)(" 2. Try a sample request: "),i,(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(R,{onClick:t[1]||(t[1]=t=>e.step=3),color:"primary",label:"Continue"}),(0,o.Wm)(R,{flat:"",onClick:t[2]||(t[2]=t=>e.step=1),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(N,{name:3,title:"Deploy as a Telegram Chatbot",caption:"Optional",icon:"publish",done:e.step>3},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Create a new Telegram bot with BotFather: "),s,c,u,(0,o.Uk)(" 2. Add your bot token to the .env file "),m,_,(0,o.Uk)(" 3. Run the command below: "),d,h,(0,o.Uk)(" 4. Try to message the chatbot in Telegram "),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(R,{onClick:t[3]||(t[3]=t=>e.step=4),color:"primary",label:"Continue"}),(0,o.Wm)(R,{flat:"",onClick:t[4]||(t[4]=t=>e.step=2),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(N,{name:4,title:"Deploy as a Microsoft Teams Chatbot",caption:"Optional",icon:"publish",done:e.step>4},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Create a new Azure Bot Service: "),g,f,b,(0,o.Uk)(" 2. Add the variables below to the .env file "),y,k,(0,o.Uk)(" 3. Run the command below: "),w,T,(0,o.Uk)(" 4. Exposes your localhost: "),v,I,(0,o.Uk)(" 5. Add the exposed url to the Azure Bot Configuration "),(0,o.Wm)(q,{src:"https://github.com/somethingwentwell/openai-botframework/raw/0f660a1c241650b63880edea64741170e3029399/img/appid_pw.png"}),P,O,(0,o.Uk)(" 6. Enable the Teams Channel "),(0,o.Wm)(q,{src:"https://github.com/somethingwentwell/openai-botframework/raw/main/img/teamschannel.png"}),U,A,(0,o.Uk)(" 7. Open the Teams Channel and try to message the chatbot "),(0,o.Wm)(q,{src:"https://github.com/somethingwentwell/openai-botframework/raw/main/img/openinteams.png"}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(R,{flat:"",onClick:t[5]||(t[5]=t=>e.step=3),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"])])),_:1},8,["modelValue"])])),_:1})}var C=n(499),S=n(8341);const R=(0,S.s)(),W=()=>{let e=`ENGINE=${R.gpt.engine}\n`;e+=`MAX_TOKENS=${R.gpt.max_tokens}\n`,e+=`TEMPERATURE=${R.gpt.temperature}\n`,e+=`FREQUENCY_PENALTY=${R.gpt.frequency_penalty}\n`,e+=`PRESENCE_PENALTY=${R.gpt.presence_penalty}\n`,e+=`TOP_P=${R.gpt.top_p}\n`,e+=`STOP=[${R.gpt.stop?R.gpt.stop.join(","):""}]\n`,e+=`PREPROMPT='${R.gpt.preprompt}'\n`,e+=`OPENAI_NAME=${R.apiInfo.azure_openai_name}\n`,e+=`OPENAI_API_TYPE=${R.apiInfo.api_type}\n`,e+=`OPENAI_API_VERSION=${R.apiInfo.api_version}\n`,e+=`OPENAI_API_KEY=${R.apiInfo.api_key}\n`;const t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=".env",o.click(),URL.revokeObjectURL(n)},N=(0,o.aZ)({name:"IndexPage",components:{},setup(){return{downloadEnv:W,step:(0,C.iH)(1)}}});var q=n(1639),x=n(9885),M=n(8225),$=n(8335),z=n(4455),B=n(1992),D=n(335),Y=n(9984),j=n.n(Y);const Q=(0,q.Z)(N,[["render",E]]),Z=Q;j()(N,"components",{QPage:x.Z,QStepper:M.Z,QStep:$.Z,QBtn:z.Z,QStepperNavigation:B.Z,QImg:D.Z})}}]);