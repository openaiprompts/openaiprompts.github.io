"use strict";(globalThis["webpackChunkopenaimart"]=globalThis["webpackChunkopenaimart"]||[]).push([[16],{8341:(e,t,n)=>{n.d(t,{s:()=>p});var o=n(1809),a=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function p(e){try{r(o.next(e))}catch(t){l(t)}}function i(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?n(e.value):a(e.value).then(p,i)}r((o=o.apply(e,t||[])).next())}))};const l={engine:"text-davinci-003",preprompt:"This is a preprompt.",prompt:"This is a prompt.",result:"",temperature:.3,max_tokens:128,top_p:1,frequency_penalty:0,presence_penalty:0,stop:null,best_of:1,title:"Untitled",author_name:"",author_id:"",tags:null},p=(0,o.Q_)("oai",{state:()=>({gpt:{},apiInfo:{api_type:"azure",azure_openai_name:localStorage.getItem("azure_openai_name")||"",api_version:"2022-12-01",api_key:localStorage.getItem("api_key")||""},promptId:""}),getters:{},actions:{resetGPT:function(){for(const e in l)this.gpt[e]=l[e]},fetchHtmlCode:function(e){var t;return a(this,void 0,void 0,(function*(){if(console.log("starting fetchGPT"),null===this.apiInfo.api_key)return void alert("api key is null");let n=null;n=this.gpt.stop,(null===(t=this.gpt.stop)||void 0===t?void 0:t.length)&&(n=this.gpt.stop);const o=yield fetch(`https://${this.apiInfo.azure_openai_name}.openai.azure.com/openai/deployments/text-davinci-003/completions?api-version=${this.apiInfo.api_version}`,{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiInfo.api_key},body:JSON.stringify({prompt:e,max_tokens:2048,temperature:0,top_p:1,frequency_penalty:0,presence_penalty:0,stop:null})}),a=yield o.json();return a.error?(console.log(a.error),void alert(a.error.message)):a.choices[0].text}))},fetchGPT:function(){return a(this,void 0,void 0,(function*(){if(console.log("starting fetchGPT"),null===this.apiInfo.api_key)return void alert("api key is null");let e=this.gpt.stop;console.log("stopValue",e),0===(null===e||void 0===e?void 0:e.length)&&(e=null);const t=yield fetch(`https://${this.apiInfo.azure_openai_name}.openai.azure.com/openai/deployments/${this.gpt.engine}/completions?api-version=${this.apiInfo.api_version}`,{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiInfo.api_key},body:JSON.stringify({prompt:this.gpt.preprompt+this.gpt.prompt,max_tokens:"string"==typeof this.gpt.max_tokens?parseInt(this.gpt.max_tokens):this.gpt.max_tokens,temperature:this.gpt.temperature,top_p:this.gpt.top_p,frequency_penalty:this.gpt.frequency_penalty,presence_penalty:this.gpt.presence_penalty,stop:e})}),n=yield t.json();if(n.error)return console.log(n.error),void alert(n.error.message);this.gpt.result=n.choices[0].text}))},setLocalStorage:function(){localStorage.setItem("api_key",this.apiInfo.api_key),localStorage.setItem("azure_openai_name",this.apiInfo.azure_openai_name),alert("Saved to localStorage")}}})},7016:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var o=n(9835),a=n(6970);const l=(0,o._)("div",{class:"text-h4 q-pa-md"},"Simple Web, API & Chatbot Deployment",-1),p={class:"q-gutter-y-md"},i=(0,o._)("div",{class:"text-h6"},"HTML Generator Prompt",-1),r=(0,o._)("div",{class:"text-h6"},"Generated HTML",-1),s=(0,o._)("div",{class:"text-h6"},"Deploy HTML",-1),c=["href"],m=(0,o._)("b",null,".env",-1),u=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"docker run -d -p 80:80 --env-file .env warching/openai-api",-1),d=(0,o._)("br",null,null,-1),h=(0,o._)("code",{style:{display:"block"}}," curl --location --request POST 'http://localhost/' --header 'Content-Type: application/json' --data-raw '{ \"prompt\": \"Hi\" }' ",-1),_=(0,o._)("a",{target:"_blank",href:"https://telegram.me/botfather"},"https://telegram.me/botfather",-1),f=(0,o._)("br",null,null,-1),g=(0,o._)("br",null,null,-1),b=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"TG_BOT_TOKEN=YOUR_BOT_TOKEN",-1),y=(0,o._)("br",null,null,-1),w=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"docker run -d --env-file .env warching/openai-tg-bot",-1),k=(0,o._)("br",null,null,-1),v=(0,o._)("a",{target:"_blank",href:"https://portal.azure.com/#create/Microsoft.AzureBot"},"https://portal.azure.com/#create/Microsoft.AzureBot",-1),T=(0,o._)("br",null,null,-1),P=(0,o._)("br",null,null,-1),I=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},[(0,o.Uk)(" MicrosoftAppType=MultiTenant "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppId=YOUR_MICROSOFT_APP_ID "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppPassword=YOUR_MICROSOFT_APP_PASSWORD "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppTenantId=YOUR_MICROSOFT_APP_TENANT_ID ")],-1),U=(0,o._)("br",null,null,-1),E=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap"}},"docker run -d -p 3978:3978 --env-file .env warching/openai-teams-bot",-1),x=(0,o._)("br",null,null,-1),O=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap"}},"npx localtunnel --port 3978",-1),A=(0,o._)("br",null,null,-1),S=(0,o._)("br",null,null,-1),W=(0,o._)("br",null,null,-1),C=(0,o._)("br",null,null,-1),R=(0,o._)("br",null,null,-1);function $(e,t,n,$,q,H){const M=(0,o.up)("q-tab"),N=(0,o.up)("q-tabs"),L=(0,o.up)("q-separator"),z=(0,o.up)("q-input"),D=(0,o.up)("q-btn"),Z=(0,o.up)("q-stepper-navigation"),V=(0,o.up)("q-step"),j=(0,o.up)("q-stepper"),Q=(0,o.up)("q-tab-panel"),B=(0,o.up)("q-img"),G=(0,o.up)("q-tab-panels"),Y=(0,o.up)("q-card"),F=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(F,{class:"q-pa-md"},{default:(0,o.w5)((()=>[l,(0,o._)("div",p,[(0,o.Wm)(Y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(N,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{name:"html",label:"HTML"}),(0,o.Wm)(M,{name:"bot",label:"API & Bots"})])),_:1},8,["modelValue"]),(0,o.Wm)(L),(0,o.Wm)(G,{modelValue:e.tab,"onUpdate:modelValue":t[14]||(t[14]=t=>e.tab=t),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{name:"html"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{modelValue:e.step1,"onUpdate:modelValue":t[6]||(t[6]=t=>e.step1=t),"header-nav":"",vertical:"",color:"primary",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{name:1,title:"Generate HTML",icon:"settings",done:e.step1>1},{default:(0,o.w5)((()=>[i,(0,o.Wm)(z,{modelValue:e.htmlPrompt,"onUpdate:modelValue":t[1]||(t[1]=t=>e.htmlPrompt=t),filled:"",type:"textarea",hint:"HTML Generator Prompt",autogrow:""},null,8,["modelValue"]),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:t[2]||(t[2]=t=>{e.fetchHtml(e.htmlPrompt),e.step1=2}),color:"primary",label:"Generate HTML and Continue"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(V,{name:2,title:"Download HTML",icon:"download",done:e.step1>2},{default:(0,o.w5)((()=>[r,(0,o.Wm)(z,{modelValue:e.html,"onUpdate:modelValue":t[3]||(t[3]=t=>e.html=t),filled:"",type:"textarea",hint:"HTML",autogrow:""},null,8,["modelValue"]),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:t[4]||(t[4]=t=>e.downloadHtml()),color:"primary",label:"Download HTML"}),(0,o.Wm)(D,{onClick:t[5]||(t[5]=t=>{e.deployHtml(),e.step1=3}),color:"primary",label:"Deploy",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(V,{name:3,title:"Deploy",icon:"publish",done:e.step1>1},{default:(0,o.w5)((()=>[s,(0,o.Uk)(" Deployed to: "),(0,o._)("a",{href:e.htmlUrl,target:"__blank"},(0,a.zw)(e.htmlUrl),9,c),(0,o.Wm)(Z)])),_:1},8,["done"])])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(Q,{name:"bot"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{modelValue:e.step2,"onUpdate:modelValue":t[13]||(t[13]=t=>e.step2=t),"header-nav":"",vertical:"",color:"primary",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{name:1,title:"Download .env file",icon:"settings",done:e.step2>4},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:e.downloadEnv,outline:"",round:"",color:"primary",icon:"save"},null,8,["onClick"]),(0,o.Uk)(" Download the .env example, rename it to "),m,(0,o.Uk)(" and place it in the root of your project. "),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:t[7]||(t[7]=t=>e.step=2),color:"primary",label:"Continue"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(V,{name:2,title:"Deploy as an API",caption:"Optional",icon:"publish",done:e.step2>2},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Run the command below: "),u,d,(0,o.Uk)(" 2. Try a sample request: "),h,(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:t[8]||(t[8]=t=>e.step1=3),color:"primary",label:"Continue"}),(0,o.Wm)(D,{flat:"",onClick:t[9]||(t[9]=t=>e.step1=1),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(V,{name:3,title:"Deploy as a Telegram Chatbot",caption:"Optional",icon:"publish",done:e.step2>3},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Create a new Telegram bot with BotFather: "),_,f,g,(0,o.Uk)(" 2. Add your bot token to the .env file "),b,y,(0,o.Uk)(" 3. Run the command below: "),w,k,(0,o.Uk)(" 4. Try to message the chatbot in Telegram "),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{onClick:t[10]||(t[10]=t=>e.step=4),color:"primary",label:"Continue"}),(0,o.Wm)(D,{flat:"",onClick:t[11]||(t[11]=t=>e.step=2),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(V,{name:4,title:"Deploy as a Microsoft Teams Chatbot",caption:"Optional",icon:"publish",done:e.step2>4},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Create a new Azure Bot Service: "),v,T,P,(0,o.Uk)(" 2. Add the variables below to the .env file "),I,U,(0,o.Uk)(" 3. Run the command below: "),E,x,(0,o.Uk)(" 4. Exposes your localhost: "),O,A,(0,o.Uk)(" 5. Add the exposed url to the Azure Bot Configuration "),(0,o.Wm)(B,{src:"https://github.com/somethingwentwell/openai-botframework/raw/0f660a1c241650b63880edea64741170e3029399/img/appid_pw.png"}),S,W,(0,o.Uk)(" 6. Enable the Teams Channel "),(0,o.Wm)(B,{src:"https://github.com/somethingwentwell/openai-botframework/raw/main/img/teamschannel.png"}),C,R,(0,o.Uk)(" 7. Open the Teams Channel and try to message the chatbot "),(0,o.Wm)(B,{src:"https://github.com/somethingwentwell/openai-botframework/raw/main/img/openinteams.png"}),(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(D,{flat:"",onClick:t[12]||(t[12]=t=>e.step=3),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1})}var q=n(499),H=n(8341),M=n(6950),N=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function p(e){try{r(o.next(e))}catch(t){l(t)}}function i(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?n(e.value):a(e.value).then(p,i)}r((o=o.apply(e,t||[])).next())}))};const L=(0,o.aZ)({name:"IndexPage",components:{},setup(){const e=(0,H.s)();console.log(e.gpt);let t=`\n\t  create a static html page using jquery and semantic-ui with the following requirements:\n      (1) The page must be responsive\n      (2) The title of this page is ${e.gpt.title}\n      (3) Hardcode the following text in preprompt variable and should not be shown in the UI:\n      ${e.gpt.preprompt.replace(/\n/g,"\\n")}\n\t  (4) create a input field for AzureOpenAIServiceName, OpenAIKey. \n      (5) create a textarea field Prompt. Prompt field is optional to fill.\n\t  (6) create a submit button\n\t  (7) on click submit button, API post https://{{AzureOpenAIServiceName}}.openai.azure.com/openai/deployments/${e.gpt.engine}/completions?api-version=2022-12-01, the request and response text as below\n\t  <REQUEST-HEADER>\n\t  "api-key": {{OpenAIKey}}\n\t  "Content-Type": "application/json"\n\t  <REQUEST-HEADER>\n\t  <REQUEST-START>\n\t  {\n\t      "prompt": {{preprompt}}+{{Prompt}},\n\t      "max_tokens": ${e.gpt.max_tokens},\n\t      "temperature": ${e.gpt.temperature},\n\t      "frequency_penalty": ${e.gpt.frequency_penalty},\n\t      "presence_penalty": ${e.gpt.presence_penalty},\n\t      "top_p": ${e.gpt.top_p},\n\t      "stop": ${e.gpt.stop?e.gpt.stop:null}\n\t  }\n\t  <REQUEST-END>\n\t  <RESPONSE-START>\n\t  {\n        "id": "cmpl-6uHrFWUvfg4jSSqLvjef5ADza8mST",\n        "object": "text_completion",\n        "created": 1678873033,\n            "model": "text-davinci-003",\n        "choices": [\n            {\n                "text": ${e.gpt.result.replace(/\n/g,"\\n")},\n                    "index": 0,\n                    "finish_reason": "stop",\n                    "logprobs": null\n                }\n            ],\n            "usage": {\n                "completion_tokens": 591,\n                "prompt_tokens": 195,\n                "total_tokens": 786\n            }\n\t  }\n\t  <RESPONSE-END>\n      (8) use fetch async call the api and await store the response.choices[0].text in result variable\n      (9) show loading on api call start, hide loading on api call end\n      (10) display the result variable in textarea\n\t\n\t\n\t      <!DOCTYPE html>`;const n=()=>{let t=`ENGINE=${e.gpt.engine}\n`;t+=`MAX_TOKENS=${e.gpt.max_tokens}\n`,t+=`TEMPERATURE=${e.gpt.temperature}\n`,t+=`FREQUENCY_PENALTY=${e.gpt.frequency_penalty}\n`,t+=`PRESENCE_PENALTY=${e.gpt.presence_penalty}\n`,t+=`TOP_P=${e.gpt.top_p}\n`,t+=`STOP=[${e.gpt.stop?e.gpt.stop.join(","):""}]\n`,t+=`PREPROMPT='${e.gpt.preprompt}'\n`,t+=`OPENAI_NAME=${e.apiInfo.azure_openai_name}\n`,t+=`OPENAI_API_TYPE=${e.apiInfo.api_type}\n`,t+=`OPENAI_API_VERSION=${e.apiInfo.api_version}\n`,t+=`OPENAI_API_KEY=${e.apiInfo.api_key}\n`;const n=new Blob([t],{type:"text/plain"}),o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download=".env",a.click(),URL.revokeObjectURL(o)};let o=(0,q.iH)("");const a=t=>N(this,void 0,void 0,(function*(){M.Z.show(),o.value=yield e.fetchHtmlCode(t),M.Z.hide()}));let l=(0,q.iH)(`https://openaiweb.blob.core.windows.net/site/${e.promptId}.html`);const p=()=>N(this,void 0,void 0,(function*(){M.Z.show();const t="https://openaiweb.blob.core.windows.net",n="site",a=`${e.promptId}.html`,p="sv=2021-12-02&ss=b&srt=co&sp=rwlaciytfx&se=2024-03-16T13:41:23Z&st=2023-03-16T05:41:23Z&spr=https,http&sig=JIYdlCk8xarepzhiZK969FpSdjVp%2FwH6M4dLfa7CkGM%3D",i=`${t}/${n}/${a}?${p}`,r=yield fetch(i,{method:"PUT",body:o.value,headers:{"Content-Type":"text/html; charset=UTF-8","x-ms-blob-type":"BlockBlob","x-ms-version":"2021-12-02"}});console.log(`HTML file uploaded to ${r.url.split("?")[0]}`),l.value=r.url.split("?")[0],M.Z.hide()})),i=()=>{const e=new Blob([o.value],{type:"text/html"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="index.html",n.click(),URL.revokeObjectURL(t)};return{oai:e,downloadEnv:n,downloadHtml:i,step1:(0,q.iH)(1),step2:(0,q.iH)(1),tab:(0,q.iH)("html"),htmlPrompt:t,html:o,fetchHtml:a,deployHtml:p,htmlUrl:l}}});var z=n(1639),D=n(9885),Z=n(4458),V=n(7817),j=n(900),Q=n(926),B=n(9800),G=n(4106),Y=n(8225),F=n(8335),K=n(6611),J=n(1992),X=n(4455),ee=n(335),te=n(9984),ne=n.n(te);const oe=(0,z.Z)(L,[["render",$]]),ae=oe;ne()(L,"components",{QPage:D.Z,QCard:Z.Z,QTabs:V.Z,QTab:j.Z,QSeparator:Q.Z,QTabPanels:B.Z,QTabPanel:G.Z,QStepper:Y.Z,QStep:F.Z,QInput:K.Z,QStepperNavigation:J.Z,QBtn:X.Z,QImg:ee.Z})}}]);